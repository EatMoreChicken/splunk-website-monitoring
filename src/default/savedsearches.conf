[website_availability_overview]
enableSched = 0
dispatch.earliest_time = -24h
dispatch.latest_time = now
search = sourcetype="web_ping" | stats sparkline(avg(total_time)) as sparkline_response_time avg(total_time) as avg_response_time max(total_time) as max_response_time count by url | join url [ search sourcetype="web_ping" | eval last_checked = _time | convert ctime(last_checked)| table title url response_code total_time last_checked timed_out] | fillnull response_code value="Connection failed" | eval response_code=if(timed_out = "True", "Connection timed out", response_code) | eval response_time=total_time | table title url response_code last_checked response_time avg_response_time max_response_time sparkline_response_time | eval response_time=round(response_time, 2)." ms" | eval avg_response_time=round(avg_response_time, 2)." ms" | eval max_response_time=round(max_response_time, 2)." ms"